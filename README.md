# OpenWeather Data Pipeline

This project implements an AWS-based data pipeline to fetch weather data from the OpenWeather API, process it, and store it in an S3 bucket. The pipeline consists of AWS Lambda functions triggered by S3 events and EventBridge Scheduler.

## Project Structure

- `lib/`: Contains AWS CDK (Cloud Development Kit) code to provision infrastructure.
- `lambda-image-extract/`: Docker image for Lambda function to fetch weather data.
- `lambda-image-transform/`: Docker image for Lambda function to transform weather data.

## Prerequisites

Before running this project, make sure you have a .env file

- Docker installed
- Python 3.x installed
- CDK installed

## Configuration

Before deploying, ensure the following configurations are set:

- AWS credentials are properly configured in a .env file.
- Environment variables are set:
    - `AWS_ACCESS_KEY`: AWS access key.
    - `AWS_ACCESS_SECRET`: AWS secret access key.
    - `API_KEY`: OpenWeather API key.
    - `s3_upload_bucket`: Name of the S3 bucket for data storage.


## Usage
The CSV files generated by the pipeline contain the following fields:

- `City`: Name of the city.
- `Temperature (Â°C)`: Temperature in Celsius.
- `Description`: Description of weather conditions.
- `Humidity (%)`: Humidity percentage.
- `Wind Speed (m/s)`: Wind speed in meters per second.
- `Visibility (m)`: Visibility in meters.

The transformation applied to the weather data includes:

- Temperature Conversion: Celsius to Fahrenheit.
- Description Simplification: Extracting the first word from the weather description.
- Humidity Normalization: Converting humidity to a decimal percentage.
- Wind Speed Units Conversion: Converting from meters per second to kilometers per hour.
- Visibility Units Conversion: Converting from meters to kilometers.

Once the infrastructure is deployed, the pipeline will automatically trigger daily to fetch weather data, process it, and store it in the specified S3 bucket.
